{
  "hash": "e2c7a63dbaba4642d4d3055127b1e462",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Raster Data Exercise\"\nexecute:\n  eval: false\n  echo: false\n---\n\n\n\n## Introduction\n\nIn this exercise, you will develop a spatial habitat suitability model to identify potential chamois habitats in the Canton of Lucerne. This multi-criteria analysis will combine your knowledge of vector and raster data processing, spatial analysis, and ecological modeling.\n\n### Ecological Background\n\nChamois (*Rupicapra rupicapra*) are mountain ungulates native to European mountain ranges. Understanding their habitat requirements is crucial for conservation planning. Based on ecological research, chamois have the following habitat requirements:\n\n-   **Home range size**: Approximately 1 km²\n-   **Forest cover**: Require sufficient forest within their home range for refuge and thermal protection\n-   **Steep terrain**: Need steep areas (\\> 30°) where they have physiological advantages over predators\n-   **Human disturbance**: Avoid human settlements and heavily trafficked roads\n\n### Analytical Workflow\n\n@fig-process-model shows the complete workflow for this analysis. Study this process model carefully - it will guide you through the entire exercise. The process model is also available as a high-resolution PDF on Moodle.\n\n![Process model for chamois habitat suitability analysis](images/ProcessModel_MCA_Chamois.PNG){#fig-process-model}\n\n::: {.callout-tip}\n## Working with the Process Model\nBefore you begin, take time to understand:\n\n- What input datasets are needed?\n- What geoprocessing steps will you perform?\n- How do the steps connect to each other?\n- What is the final output?\n:::\n\nYour task is to implement this workflow using R, combining vector and raster analysis techniques to produce a habitat suitability map.\n\n## Task 1: Data Exploration and Project Setup\n\n### Setup Your Workspace\n\n1. Create a new R Project\n2. Download the exercise data from Moodle (section \"CW 39 -- Spatial Analysis II\")\n3. Extract the data into your new folder\n4. Create a new R script or Quarto document for this exercise\n\n### Understanding Your Data\n\nYour downloaded data folder contains several datasets:\n\n::: {.callout-note}\n## Input Datasets\n\n- **Raster data:**\n  -   `dhm25_lu.tif` - Digital elevation model at 25m resolution\n- **Vector data (in GeoPackages):**\n  -   `tlm_bb` (polygon layer) - Land cover classification from swiss_TLM3.gpkg\n  -   `tlm_strassen` (line layer) - Road network from swiss_TLM3.gpkg\n  -   `arealstatistik` (point layer) - Swiss land use statistics from Arealstatistik.gpkg\n  -   `kantonsgebiet_lu` (polygon layer) - Canton boundary from swissBOUNDARIES3D.gpkg\n:::\n\n### Metadata Resources\n\nUnderstanding your data is crucial for proper analysis. Familiarize yourself with these metadata sources:\n\n-   **DHM25**: [Data source & description](https://www.swisstopo.admin.ch/de/hoehenmodell-dhm25)\n-   **swissTLM3D**: [Data source & description](https://www.swisstopo.admin.ch/de/landschaftsmodell-swisstlm3d) | [Objektkatalog (2024)](https://backend.swisstopo.admin.ch/fileservice/sdweb-docs-prod-swisstopoch-files/files/2024/03/06/b2e890ee-a5a4-4ea6-8b87-13f74eb41a1a.pdf)\n-   **Arealstatistik BFS**: [Data source & description](https://www.bfs.admin.ch/bfs/de/home/dienstleistungen/geostat/geodaten-bundesstatistik/boden-nutzung-bedeckung-eignung/arealstatistik-schweiz.html) | [Nomenklatur 72 Grundkategorien](https://www.bfs.admin.ch/bfs/de/home/statistiken/raum-umwelt/nomenklaturen/arealstatistik/noas2004/72-grundkategorien.html)\n\n::: {.callout-tip}\n## Hint: Required R Packages\nYou'll need the following packages for this exercise:\n\n- `sf` for vector data\n- `terra` for raster data\n- `dplyr` for data manipulation\n- `ggplot2` or `tmap` for visualisation\n:::\n\n### Your First Tasks\n\nLoad the data and explore its properties. Consider these questions:\n\n1. What coordinate reference system (CRS) are the datasets using?\n2. What is the spatial extent and resolution of the elevation model?\n3. What attributes are available in each vector layer?\n4. Do all datasets cover the same geographic area?\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\nCreate a visualization to familiarize yourself with the data.\n\n\n::: {.cell}\n\n:::\n\n\n## Task 2: Create a Forest Cover Raster\n\n**Objective**: Convert the vector-based land cover layer (`tlm_bb`) into a raster format that represents forest areas. This raster will serve as one of your habitat suitability criteria.\n\n**Background**: Before proceeding, consult the swissTLM3D [Objektkatalog](https://backend.swisstopo.admin.ch/fileservice/sdweb-docs-prod-swisstopoch-files/files/2024/03/06/b2e890ee-a5a4-4ea6-8b87-13f74eb41a1a.pdf) to understand the classification system. The land use types are stored in the field **\"OBJEKTART\"** (see TOPIC TLM_BB).\n\n::: {.callout-important}\n## Think About This\nWhich `OBJEKTART` categories represent forest that chamois would use for refuge? Consider different forest types and their characteristics.\n:::\n\n### Workflow Steps\n\nYour task involves several sequential operations:\n\n1. **Select forest features** - Filter the `tlm_bb` layer to extract only forest-related land cover types\n2. **Dissolve boundaries** - Merge all forest polygons into a single multipart feature\n3. **Rasterize** - Convert the vector layer to raster format using the DHM25 as a template\n4. **Validate** - Examine the output to ensure it's correct\n\n::: {.callout-tip}\n## Hint: Forest Categories\nFor this analysis, consider these forest types as suitable chamois habitat:\n- Gebüschwald\n- Wald\n- Wald offen\n:::\n\n::: {.callout-tip collapse=\"true\"}\n## Hint: Vector to Raster Conversion\nWhen rasterizing:\n- Use the DHM25 as a template to ensure matching extent and resolution\n- The `terra` package has a `rasterize()` function\n- You may need to convert sf objects to terra's vect format\n- Consider what value to assign to forest cells (e.g., 1 = forest)\n:::\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n::: {.callout-note}\n## Reflection Question\nExamine the properties of your `forest_raster`. Is it an integer or floating-point raster? What values does it contain? Why might this matter for subsequent analyses?\n:::\n\n## Task 3: Derive Terrain Slope\n\n**Objective**: Calculate slope from the digital elevation model. Slope is a critical habitat parameter - chamois use steep terrain as refuges where they have physiological advantages over predators.\n\n**Background**: Slope represents the rate of change in elevation and can be calculated from a DEM using neighborhood operations. The `terra` package provides the `terrain()` function for this purpose.\n\n::: {.callout-tip collapse=\"true\"}\n## Hint: Terrain Analysis\n- The `terrain()` function requires specifying which terrain variable to calculate (e.g., \"slope\", \"aspect\")\n- Choose appropriate units for your analysis (degrees vs. radians)\n- The output will be a floating-point raster\n:::\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n::: {.callout-note}\n## Reflection Questions\n- What data type is the slope raster? Why does this differ from the forest raster?\n- What is the steepest slope in your study area? Is this realistic?\n- Where would you expect to find the steepest slopes?\n:::\n\n## Task 4: Identify Steep Terrain\n\n**Objective**: Reclassify the continuous slope values into a binary classification: steep vs. non-steep areas. Based on ecological studies, chamois benefit from slopes steeper than 30°.\n\n**Background**: Reclassification transforms continuous data into categorical classes. You'll create a binary raster where:\n- **0** = non-steep areas (0-30°)\n- **1** = steep areas (>30°)\n\n::: {.callout-tip collapse=\"true\"}\n## Hint: Reclassification in terra\nThe `classify()` function uses a reclassification matrix with three columns:\n- Column 1: Lower bound of range\n- Column 2: Upper bound of range\n- Column 3: New value to assign\n\nRemember to use `include.lowest = TRUE` to handle boundary values correctly.\n:::\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n## Task 5: Extract High-Traffic Roads\n\n**Objective**: Identify heavily trafficked roads that chamois would avoid. While we don't have direct traffic volume data, we can use road type as a proxy for traffic intensity.\n\n**Background**: Consult the swissTLM3D Objektkatalog to understand the road classification system. The `OBJEKTART` field contains road type information, and the `KUNSTBAUTE` field indicates infrastructure like tunnels.\n\n::: {.callout-important}\n## Important Consideration\nWhy should roads in tunnels be excluded from this analysis? Think about how chamois would perceive and respond to different road types.\n:::\n\n::: {.callout-tip}\n## Hint: Road Types to Consider\nMajor road types that typically carry high traffic:\n- Autobahn (highways)\n- Autostrasse (expressways)\n- 10m, 8m, 6m, 4m Strasse (roads classified by width)\n- Einfahrt, Ausfahrt, Zufahrt (on/off ramps and access roads)\n\nExclude roads where `KUNSTBAUTE` equals \"Tunnel\".\n:::\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n## Task 6: Delineate Settlement Areas\n\n**Objective**: Create a spatial layer representing human settlement areas that chamois would avoid. You'll use the Swiss Land Use Statistics (Arealstatistik) dataset for this purpose.\n\n**Background**: The [Arealstatistik](https://www.bfs.admin.ch/bfs/de/home/dienstleistungen/geostat/geodaten-bundesstatistik/boden-nutzung-bedeckung-eignung/arealstatistik-schweiz.html) provides detailed land use information at the hectare level. The dataset uses a classification system with 72 basic categories (see [Nomenklatur 72 Grundkategorien](https://www.bfs.admin.ch/bfs/de/home/statistiken/raum-umwelt/nomenklaturen/arealstatistik/noas2004/72-grundkategorien.html)).\n\n::: {.callout-important}\n## Your Task: Define Settlement Areas\nBefore looking at the hint below, download and examine the variable list ([xlsx-file](https://dam-api.bfs.admin.ch/hub/api/dam/assets/32376296/master)) - specifically the sheet \"Codes AS_72\".\n\n**Think about:** Which categories represent areas where human activity would disturb chamois? Consider different types of buildings and their surroundings (in German, \"Umschwung\" refers to the area immediately surrounding buildings).\n:::\n\n::: {.callout-tip collapse=\"true\"}\n## Hint: Settlement Categories (AS_72 codes)\nFor this analysis, consider these categories as settlement areas:\n- 1: Industrie- und Gewerbegebäude\n- 2: Umschwung von Industrie- und Gewerbegebäuden\n- 3: Ein- und Zweifamilienhäuser\n- 4: Umschwung von Ein- und Zweifamilienhäusern\n- 5: Reihen- und Terrassenhäuser\n- 6: Umschwung von Reihen- und Terrassenhäusern\n- 7: Mehrfamilienhäuser\n- 8: Umschwung von Mehrfamilienhäusern\n- 9: Öffentliche Gebäude\n- 10: Umschwung von öffentlichen Gebäuden\n- 11: Landwirtschaftliche Gebäude\n- 13: Nicht spezifizierte Gebäude\n:::\n\n### Workflow\n\nYour analysis should:\n\n1. **Filter** the Arealstatistik points to extract settlement-related categories\n2. **Buffer** these points by 150 meters (representing a zone of human influence)\n3. **Dissolve** overlapping buffers to create contiguous settlement areas\n\n::: {.callout-note}\n## Why Buffer?\nThe Arealstatistik uses point samples at hectare intervals. Buffering creates a more realistic representation of settlement extent and the zone of human disturbance around settlements.\n:::\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n## Task 7: Analyze Local Habitat Characteristics\n\n**Objective**: Evaluate the landscape surrounding every location in terms of forest cover and steep terrain availability. This analysis accounts for the chamois home range size (~1 km²) by examining the local neighborhood around each potential habitat location.\n\n### Conceptual Background\n\nChamois don't just need forest and steep slopes - they need sufficient amounts of these resources *within their home range*. A focal (moving window) analysis evaluates each cell by examining its neighborhood, essentially asking: \"If a chamois lived here, would there be enough resources within its typical home range?\"\n\n::: {.callout-important}\n## Think About This\n- Why is it not enough to simply identify where forests and steep slopes exist?\n- How does home range size influence habitat suitability?\n- What does it mean if a location has high forest cover within 1 km² but no steep slopes nearby?\n:::\n\n### Data Preparation\n\nBefore conducting focal statistics, you need to handle NA (no data) values. Binary rasters (forest/non-forest, steep/non-steep) need to explicitly represent \"absence\" as 0 rather than NA.\n\n::: {.callout-tip collapse=\"true\"}\n## Hint: Replacing NA Values\nUse the `classify()` function with a reclassification matrix that maps NA to 0:\n```r\nnew_raster <- classify(old_raster, cbind(NA, 0))\n```\n:::\n\n\n::: {.cell}\n\n:::\n\n\n### Calculate Window Size\n\nTo represent a 1 km² home range, you need to determine the appropriate window size in raster cells.\n\n::: {.callout-note}\n## Mathematical Approach\nGiven:\n- Home range area = 1 km² = 1,000,000 m²\n- Raster resolution = 25m × 25m = 625 m² per cell\n- Number of cells needed = 1,000,000 m² ÷ 625 m²/cell = ?\n- Window dimensions (assuming square window) = √(number of cells) = ?\n\nCalculate this yourself, then check the code below.\n:::\n\n\n::: {.cell}\n\n:::\n\n\n### Perform Focal Analysis\n\nThe focal analysis counts how many forest cells (or steep cells) exist within the moving window around each location.\n\n::: {.callout-tip collapse=\"true\"}\n## Hint: Focal Analysis in terra\nThe `focal()` function requires:\n- Input raster\n- Weight matrix (`w`) - use `matrix(1, nrow=size, ncol=size)` for equal weights\n- Function to apply (`fun = \"sum\"` to count cells with value 1)\n- `na.rm = TRUE` to handle any remaining NA values\n:::\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {#fig-focal-results .cell layout-ncol=\"2\"}\n\n\nFocal analysis results showing local resource availability\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n::: {.callout-note}\n## Interpret Your Results\nThe output values typically range from 0 to ~1500-1600.\n\n**Think about:**\n- What does a value of 0 mean? What about 1600?\n- Why might the maximum be less than 1600 (the theoretical maximum)?\n- Which areas have the highest forest counts? Highest steep terrain counts?\n- How do these patterns relate to the topography of Canton Lucerne?\n:::\n\n## Task 8: Calculate Distance to Human Disturbance\n\n**Objective**: Quantify how far each location is from human disturbance sources (settlements and major roads). Chamois are sensitive to human activity, so greater distances should indicate better habitat quality.\n\n**Background**: Distance calculations create continuous surfaces where each cell's value represents its proximity to the nearest feature. This allows you to model avoidance behavior - animals may select habitat based on distance to disturbance sources.\n\n::: {.callout-important}\n## Conceptual Question\nHow is a distance-based criterion different from the binary (present/absent) classification we used for forest and steep areas? Why use distance rather than simply excluding areas near roads and settlements?\n:::\n\n### Workflow\n\nTo calculate distances in a raster environment:\n\n1. **Rasterize** vector features (roads and settlements)\n2. **Calculate Euclidean distance** from each cell to the nearest feature\n3. **Analyze** the resulting distance surfaces\n\n::: {.callout-tip collapse=\"true\"}\n## Hint: Distance Calculation\nThe terra `distance()` function:\n- Takes a raster where features are marked with values (typically 1)\n- Calculates the straight-line distance from each cell to the nearest non-NA cell\n- Returns distances in map units (meters for EPSG:2056)\n:::\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {#fig-distances .cell layout-ncol=\"2\"}\n\n\nDistance surfaces from human disturbance sources\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n::: {.callout-note}\n## Reflection Questions\n- What are the maximum distances to roads and settlements in your study area?\n- Where would you expect to find the most remote areas?\n- How might chamois use areas at different distances from human activity?\n- Could there be areas that are *too* remote for chamois? What other factors might limit habitat beyond distance to disturbance?\n:::\n\n## Task 9: Standardize Criteria to Common Scale\n\n**Objective**: Transform all four habitat criteria onto a common suitability scale, enabling meaningful comparison and combination of different environmental factors.\n\n### The Standardization Problem\n\nYou now have four criteria measured in different units:\n- `focal_forest`: count of forest cells (0-1600)\n- `focal_steepness`: count of steep cells (0-1600)\n- `distance_roads`: meters (0-several thousand)\n- `distance_settlement`: meters (0-several thousand)\n\n::: {.callout-important}\n## Critical Question\nWhy can't we directly combine these raw values? What problems would arise if we simply added them together?\n\nConsider:\n- A location with 500 forest cells + 500 steep cells + 5000m from roads + 3000m from settlements = 9000\n- Another location with 100 forest cells + 100 steep cells + 200m from roads + 100m from settlements = 500\n\nDoes the first location really have 18× better habitat? How do the different measurement units affect interpretation?\n:::\n\n### Solution: Suitability Classification (Grading)\n\nStandardize all criteria using a common five-class suitability scale:\n\n- **1** = unsuitable\n- **2** = conditionally suitable\n- **3** = moderately suitable\n- **4** = well suitable\n- **5** = very well suitable\n\n### Classification Thresholds\n\nThe following thresholds are based on ecological considerations and expert knowledge:\n\n::: {.panel-tabset}\n### Forest Cover\n**focal_forest** (cell count within 1 km²):\n\n- 0 - 300 → 1 (unsuitable: <20% forest)\n- 300 - 600 → 2 (conditional: 20-37%)\n- 600 - 900 → 3 (moderate: 37-56%)\n- 900 - 1200 → 4 (good: 56-75%)\n- 1200 - 2000 → 5 (excellent: >75%)\n\n### Steep Terrain\n**focal_steepness** (cell count within 1 km²):\n\n- 0 - 200 → 1 (unsuitable: <12% steep)\n- 200 - 400 → 2 (conditional: 12-25%)\n- 400 - 600 → 3 (moderate: 25-37%)\n- 600 - 800 → 4 (good: 37-50%)\n- 800 - 2000 → 5 (excellent: >50%)\n\n### Road Distance\n**distance_roads** (meters):\n\n- 0 - 150 → 1 (unsuitable: very close)\n- 150 - 300 → 2 (conditional: close)\n- 300 - 450 → 3 (moderate: medium distance)\n- 450 - 600 → 4 (good: far)\n- 600 - 20000 → 5 (excellent: very far)\n\n### Settlement Distance\n**distance_settlement** (meters):\n\n- 0 - 250 → 1 (unsuitable: very close)\n- 250 - 500 → 2 (conditional: close)\n- 500 - 750 → 3 (moderate: medium distance)\n- 750 - 1000 → 4 (good: far)\n- 1000 - 20000 → 5 (excellent: very far)\n:::\n\n::: {.callout-note}\n## Think About the Thresholds\nThese classifications represent ecological hypotheses about chamois habitat preferences.\n\n**Questions to consider:**\n- Are these thresholds reasonable?\n- How might you validate or refine them?\n- Should all criteria have equal weight in the final analysis?\n- How sensitive might the results be to these classification boundaries?\n:::\n\n### Perform the Reclassifications\n\nNow apply these classification schemes to each criterion. You'll use the same reclassification approach you learned earlier.\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n### Visualize and Compare\n\nExamine all four standardized criteria side-by-side:\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n::: {.callout-note}\n## Compare the Patterns\nNow that all criteria are on the same scale (1-5), you can meaningfully compare them.\n\n**Look for:**\n- Which criterion shows the most variability?\n- Which areas score high on multiple criteria?\n- Are there any surprising patterns?\n- How do topographic factors (forest, slope) relate to human factors (roads, settlements)?\n:::\n\n## Task 10: Multi-Criteria Overlay Analysis\n\n**Objective**: Combine all four standardized criteria into a single habitat suitability map using raster overlay analysis.\n\n### Conceptual Background\n\nNow that all criteria are on a common 1-5 scale, you can combine them to identify areas that satisfy multiple habitat requirements simultaneously. This is the essence of Multi-Criteria Evaluation (MCE).\n\n::: {.callout-important}\n## Think About the Method\nWe'll use a simple additive model (sum of all criteria).\n\n**Consider:**\n- What assumptions does this make about how criteria interact?\n- Does it assume all criteria are equally important?\n- Could two moderate scores compensate for one poor score?\n- What's the theoretical range of output values? (Min = ?, Max = ?)\n:::\n\n### Perform the Overlay\n\nOne of the great advantages of raster data is that map algebra is straightforward - you can use standard arithmetic operators:\n\n\n::: {.cell}\n\n:::\n\n\n### Analyze the Results\n\n\n::: {.cell}\n\n:::\n\n\n::: {.callout-note}\n## Interpret the Value Range\nThe sum values range from 4 (all criteria scored 1) to 20 (all criteria scored 5).\n\n**What does this mean?**\n- **4-8**: Poor habitat - multiple limiting factors\n- **9-14**: Moderate habitat - mixed conditions\n- **15-20**: Excellent habitat - all requirements met\n\nDo you observe the full range in your study area? Why or why not?\n:::\n\n### Visualize the Habitat Suitability Map\n\n\n::: {.cell}\n\n:::\n\n\n### Create Simplified Classification\n\nFor management and communication purposes, create a three-class version:\n\n\n::: {.cell}\n\n:::\n\n\n::: {.callout-note}\n## Geographic Patterns\nExamine your final map carefully:\n\n- Where are the most suitable habitats located?\n- What geographic features characterize high-suitability areas?\n- Are there surprising results? Areas you expected to be suitable that aren't, or vice versa?\n- How contiguous are the suitable habitat patches?\n:::\n\n## Task 11: Model Validation and Critical Evaluation\n\n**Objective**: Critically evaluate your habitat suitability model by comparing it with actual chamois distribution data and calculating quantitative statistics.\n\n### Final Data Processing\n\nCreate a final, polished version of your suitability map:\n\n\n::: {.cell}\n\n:::\n\n\n### Calculate Habitat Availability\n\nQuantify how much suitable habitat exists in each suitability class:\n\n\n::: {.cell}\n\n:::\n\n\n::: {.callout-note}\n## Interpret the Statistics\n- What percentage of Canton Lucerne is \"highly suitable\" for chamois?\n- How much area is in each category?\n- Does this match your expectations based on the canton's geography?\n:::\n\n### Compare with Actual Distribution\n\nNow validate your model against reality. Visit the Info Fauna database to view actual chamois observations:\n\n**[Chamois Distribution Map - Info Fauna](https://lepus.infofauna.ch/carto/70791)**\n\n::: {.callout-important}\n## Critical Evaluation\nCompare your suitability map with the actual distribution:\n\n**Questions to consider:**\n1. Do areas with high predicted suitability show actual chamois presence?\n2. Are there areas you predicted as suitable but have no observations? Why might this be?\n3. Are there observed chamois in areas your model predicts as unsuitable? What factors might your model be missing?\n4. How well does your model capture the overall distribution pattern?\n5. What are the main sources of agreement and disagreement?\n\n**Important:** Absence of observations doesn't always mean absence of animals - consider sampling effort, accessibility, and data reporting biases.\n:::\n\n## Critical Discussion\n\n### Model Limitations and Improvements\n\n::: {.callout-warning}\n## Reflect on Your Methodology\nYour model makes several simplifying assumptions. Consider these limitations and potential improvements:\n:::\n\n#### 1. Equal Weighting of Criteria\n\n**Current approach:** All four criteria contribute equally (simple sum).\n\n**Questions:**\n- Is forest cover really as important as distance to settlements?\n- Should steep terrain be weighted more heavily, as it's a primary anti-predator strategy?\n- How could you determine appropriate weights?\n\n::: {.callout-tip collapse=\"true\"}\n## Hint: Weighted Overlay\nYou could modify the overlay to use weights:\n```r\n# Example: assign different importance weights\nweighted_suitability <- 0.3*grading_forest + 0.3*grading_steepness +\n                        0.2*grading_roads + 0.2*grading_settlement\n```\n:::\n\n#### 2. Classification Thresholds\n\n**Current approach:** Fixed thresholds based on general ecological principles.\n\n**Improvements:**\n- Calibrate thresholds using actual chamois location data\n- Use statistical methods (e.g., resource selection functions)\n- Incorporate uncertainty in threshold definitions\n- Test sensitivity to different threshold values\n\n#### 3. Missing Criteria\n\n**What factors did we omit?**\n\n::: {.panel-tabset}\n### Environmental\n- **Elevation**: Chamois prefer specific elevation ranges (typically 1000-3000m in Alps)\n- **Aspect**: South-facing slopes have less snow and earlier vegetation\n- **Vegetation type**: Not all forests are equal - species composition matters\n- **Snow depth**: Critical for winter survival and accessibility\n- **Rock/cliff presence**: Provides additional escape terrain\n\n### Human Impact\n- **Recreation areas**: Hiking trails, ski resorts, climbing areas\n- **Seasonal access**: Different impacts in winter vs. summer\n- **Hunting pressure**: Legal hunting affects distribution\n- **Historical presence**: Where have chamois traditionally been?\n\n### Biotic Interactions\n- **Predators**: Lynx, wolf distribution\n- **Competitors**: Red deer, ibex overlap\n- **Disease**: Presence of keratoconjunctivitis or other diseases\n:::\n\n#### 4. Compensatory vs. Limiting Factors\n\n**Current model:** Allows compensation - high scores on some criteria can offset low scores on others.\n\n**Ecological reality:** Some factors may be *limiting* - absolutely required regardless of other conditions.\n\n::: {.callout-important}\n## Think About This\nShould the model allow an area with zero steep terrain but excellent forest cover to be classified as \"suitable\"? Or is steep terrain a non-negotiable requirement?\n\nYou could implement threshold constraints:\n```r\n# Example: require minimum steepness\nsuitable_habitat <- grading_sum\nsuitable_habitat[grading_steepness < 3] <- NA  # Exclude areas without adequate steep terrain\n```\n:::\n\n### Data Quality Considerations\n\n#### Spatial Resolution\n- Is 25m appropriate for modeling home ranges of ~1 km²?\n- How does resolution affect focal analysis results?\n\n#### Temporal Mismatch\n- Are all datasets from the same time period?\n- Have land use patterns changed since data collection?\n\n#### Data Accuracy\n- How accurate is the land cover classification?\n- Are road and settlement data complete and current?\n\n### Scale Dependencies\n\n::: {.callout-note}\n## Multi-Scale Considerations\nChamois habitat selection operates at multiple scales:\n- **Regional scale**: Climate, elevation zones\n- **Landscape scale**: Home range characteristics (what we modeled)\n- **Local scale**: Specific feeding sites, bedding areas\n\nYour model addresses primarily the landscape scale. Results might differ at other scales.\n:::\n\n## Extension Ideas\n\nIf you want to take this analysis further:\n\n### 1. Remove Water Bodies\n\n\n::: {.cell}\n\n:::\n\n\n### 2. Add Elevation Constraints\n\n\n::: {.cell}\n\n:::\n\n\n### 3. Conduct Sensitivity Analysis\n\nTest how results change with different:\n- Classification thresholds\n- Criterion weights\n- Home range window sizes\n- Inclusion/exclusion of criteria\n\n### 4. Validate Quantitatively\n\nIf you have access to presence/absence data:\n- Calculate AUC (Area Under Curve) or similar metrics\n- Perform cross-validation\n- Test predictive accuracy\n\n## Concluding Thoughts\n\n::: {.callout-important}\n## Professional Responsibility\nAs a GIS analyst, you must:\n\n✓ **Acknowledge limitations** - No model is perfect; be transparent about assumptions and constraints\n✓ **Validate results** - Compare predictions with empirical data whenever possible\n✓ **Consider context** - Understand the ecology, not just the technical methods\n✓ **Communicate uncertainty** - Decision-makers need to know confidence levels\n✓ **Document thoroughly** - Future users must understand your methodology\n\n**Remember:** A beautiful map doesn't necessarily represent reality. Critical thinking and validation are essential.\n:::\n\n## Summary of Key Concepts\n\nThrough this exercise, you've learned:\n\n1. **Vector to raster conversion** - Transforming different data types for analysis\n2. **Terrain analysis** - Deriving slope from elevation data\n3. **Reclassification** - Converting continuous and categorical data\n4. **Focal analysis** - Neighborhood operations for landscape context\n5. **Distance calculation** - Euclidean distance surfaces\n6. **Multi-criteria evaluation** - Standardization and overlay of disparate criteria\n7. **Model validation** - Comparing predictions with observations\n8. **Critical evaluation** - Understanding limitations and assumptions\n\nThese skills are fundamental to spatial analysis and transferable to many other applications beyond wildlife habitat modeling.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}